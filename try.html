<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>–ü–æ–≥–æ–¥–∞ –≤ –º—ñ—Å—Ç–∞—Ö –£–∫—Ä–∞—ó–Ω–∏</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }

        #map {
            height: 90vh;
            width: 100%;
        }

        .info-box {
            padding: 10px;
        }
    </style>
</head>
<body>

<h2 style="text-align: center;">–ü–æ–≥–æ–¥–∞ –≤ –º—ñ—Å—Ç–∞—Ö –£–∫—Ä–∞—ó–Ω–∏</h2>
<div id="map"></div>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script>
    const API_KEY = '20b98749ee0e46330e9bf1cd905c5bf9';

    // –°–ø–∏—Å–æ–∫ –º—ñ—Å—Ç –£–∫—Ä–∞—ó–Ω–∏ –∑ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏
    const cities = [
        { name: "–ö–∏—ó–≤", lat: 50.4501, lon: 30.5234 },
        { name: "–õ—å–≤—ñ–≤", lat: 49.8397, lon: 24.0297 },
        { name: "–•–∞—Ä–∫—ñ–≤", lat: 49.9935, lon: 36.2304 },
        { name: "–û–¥–µ—Å–∞", lat: 46.4825, lon: 30.7233 },
        { name: "–î–Ω—ñ–ø—Ä–æ", lat: 48.4647, lon: 35.0462 },
        { name: "–ó–∞–ø–æ—Ä—ñ–∂–∂—è", lat: 47.8388, lon: 35.1396 },
        { name: "–ß–µ—Ä–Ω—ñ–≤—Ü—ñ", lat: 48.2917, lon: 25.9354 },
        { name: "–Ü–≤–∞–Ω–æ-–§—Ä–∞–Ω–∫—ñ–≤—Å—å–∫", lat: 48.9226, lon: 24.7111 },
        { name: "–¢–µ—Ä–Ω–æ–ø—ñ–ª—å", lat: 49.5535, lon: 25.5948 },
        { name: "–£–∂–≥–æ—Ä–æ–¥", lat: 48.6208, lon: 22.2879 },
        { name: "–•–µ—Ä—Å–æ–Ω", lat: 46.6354, lon: 32.6169 },
        { name: "–ú–∏–∫–æ–ª–∞—ó–≤", lat: 46.9750, lon: 31.9946 },
        { name: "–°—É–º–∏", lat: 50.9077, lon: 34.7981 },
        { name: "–ü–æ–ª—Ç–∞–≤–∞", lat: 49.5883, lon: 34.5514 },
        { name: "–ß–µ—Ä–∫–∞—Å–∏", lat: 49.4444, lon: 32.0598 },
        { name: "–ß–µ—Ä–Ω—ñ–≥—ñ–≤", lat: 51.4982, lon: 31.2893 },
        { name: "–ö—Ä–æ–ø–∏–≤–Ω–∏—Ü—å–∫–∏–π", lat: 48.5106, lon: 32.2662 },
        { name: "–†—ñ–≤–Ω–µ", lat: 50.6199, lon: 26.2516 },
        { name: "–õ—É—Ü—å–∫", lat: 50.7476, lon: 25.3254 },
        { name: "–•–º–µ–ª—å–Ω–∏—Ü—å–∫–∏–π", lat: 49.4229, lon: 26.9871 }
    ];

    const map = L.map('map').setView([49.0, 31.0], 6);

    // –§–æ–Ω–æ–≤–∞ –∫–∞—Ä—Ç–∞ OpenStreetMap
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    // –î–æ–¥–∞–≤–∞–Ω–Ω—è –º–∞—Ä–∫–µ—Ä—ñ–≤ –º—ñ—Å—Ç
    cities.forEach(city => {
        const marker = L.marker([city.lat, city.lon]).addTo(map);
        marker.bindPopup("–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–æ–≥–æ–¥–∏...");

        marker.on('click', async () => {
            const weather = await getWeather(city.lat, city.lon);
            if (weather) {
                marker.setPopupContent(`<div class="info-box">
          <strong>${city.name}</strong><br>
          ${weather.weather[0].description}<br>
          üå° –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: ${weather.main.temp}¬∞C<br>
          üíß –í–æ–ª–æ–≥—ñ—Å—Ç—å: ${weather.main.humidity}%<br>
          üå¨ –í—ñ—Ç–µ—Ä: ${weather.wind.speed} –º/—Å
        </div>`);
            } else {
                marker.setPopupContent('–ù–µ –≤–¥–∞–ª–æ—Å—è –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–∞–Ω—ñ –ø—Ä–æ –ø–æ–≥–æ–¥—É.');
            }
        });
    });

    // –ó–∞–ø–∏—Ç –¥–æ OpenWeatherMap
    async function getWeather(lat, lon) {
        try {
            const response = await fetch(
                `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric&lang=ua`
            );
            const data = await response.json();
            return data.cod === 200 ? data : null;
        } catch (err) {
            console.error(err);
            return null;
        }
    }
</script>

</body>
</html>
